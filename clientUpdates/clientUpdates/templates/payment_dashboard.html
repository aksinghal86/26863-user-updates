{% extends 'base_generic.html' %}

{% block content %}
<div>

    <h2 class="label-center">System Level Information</h2>

    <h2 class="label-center">Source Level Information</h2>

    <div class="container">
        <!--<h4>Sources</h4>--->

        <table id="sourcesTable" class="cell-border">
            <thead>
                <tr>
                    <!-- <th scope="col" style="width:5%;">#</th> -->
                    <th scope="col">Source Name</th>
                    <th scope="col" style="width:20%;">Source Type</th>
                    <th scope="col">PFAS Score</th>
                    <th scope="col">Regulatory Bump</th>
                    <th scope="col">Base Score</th>
                    <th scope="col">3M GFE Amount</th>
                    <th scope="col">DuPont GFE Amount</th>
                    <th scope="col">Total 3M/DuPont GFE Amount</th>
                    <th scope="col">Tyco GFE Amount</th>
                    <th scope="col">BASF GFE Amount</th>
                    <th scope="col">Total Tyco/BASF GFE Amount</th>
                    <th scope="col">3M Adjusted Base Score</th>
                    <th scope="col">DuPont Adjusted Base Score</th>
                    <!-- <th scope="col" style="width:18%;">Source Status</th> -->
                    <th scope="col" class="text-center" style="width:12%;">View Details</th>
                </tr>
            </thead>
            <tbody>
                {% for source in sources %}
                <tr class="{% if source.all_nds %}unimpacted-row{% else %}impacted-row{% endif %}">
                    <!-- <th scope="row">{{ forloop.counter }}</th> -->
                    <td>{{ source.source_name }}</td>
                    <td>{{ source.source_type }}</td>
                    <!-- <td>{% if source.all_nds %} Unimpacted {% else %} PFAS detected {% endif %}</td> -->
                    <td>{{ source.pfas_score }}</td>
                    <td>{{ source.reg_bump}}</td>
                    <td>{{ source.base_score }}</td>
                    <td>{{ source.gfe_3m }}</td>
                    <td>{{ source.gfe_dupont }}</td>
                    <td>{{ source.gfe_total }}</td>
                    <td>{{ source.gfe_tyco}}</td>
                    <td>{{ source.gfe_basf }}</td>
                    <td>{{ source.gfe_total_basf_tyco }}</td>
                    <td>{{ source.abs_3m }}</td>
                    <td>{{ source.abs_dupont }}</td>
                    <td class="text-center">
                        <a href="{% url 'source-detail' pwsid=source.pwsid source_name=source.source_name %}"
                            class="text-decoration-none"
                            style="color:inherit;">
                            <i class="bi bi-eye-fill h5"></i>
                        </a>
                    </td>
                </tr>

                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

</div>

<script>
    $(document).ready(function() {
        $('#sourcesTable').DataTable({
            pageLength: 25,
            responsive: true,
            scrollX: true,
            columnDefs: [
                {orderable: false, targets: 3}
            ],
            order: [
                [2, 'asc'],
                [0, 'asc']
            ],
        });
    });
</script>




{% endblock %}